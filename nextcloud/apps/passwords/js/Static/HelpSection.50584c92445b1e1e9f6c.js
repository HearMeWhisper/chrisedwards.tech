(window.pwWpJsonP=window.pwWpJsonP||[]).push([[8],{301:function(e,t,a){var r=a(346);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a(12).default)("1c64fdd9",r,!1,{})},303:function(e,t,a){var r=a(350);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a(12).default)("78282382",r,!1,{})},345:function(e,t,a){"use strict";var r=a(301);a.n(r).a},346:function(e,t,a){},349:function(e,t,a){"use strict";var r=a(303);a.n(r).a},350:function(e,t,a){},421:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{loading:e.loading},attrs:{id:"app-content"}},[a("div",{staticClass:"app-content-left help"},[a("breadcrumb",{attrs:{items:e.getBreadcrumbIcons,showAddNew:!1}}),e._v(" "),e.loading?e._e():a("article",[a("header",[a("translate",{attrs:{tag:"h1",say:e.getPageTitle,id:"help-top"}})],1),e._v(" "),e.showNavigation?a("nav",[a("translate",{attrs:{tag:"h2",say:"Contents"}}),e._v(" "),a("ol",e._l(e.navigation,(function(t){return a("li",{class:{active:e.section===t.id}},[a("a",{attrs:{href:t.href}},[e._v(e._s(t.label))])])})),0)],1):e._e(),e._v(" "),a("section",{staticClass:"handbook-page",domProps:{innerHTML:e._s(e.source)}}),e._v(" "),a("footer",{staticClass:"handbook-footer"},[a("translate",{attrs:{say:"Still need help?"}}),e._v(" "),a("web",{attrs:{text:"Ask in our forum!",href:e.forumPage}}),e._v(" "),a("web",{attrs:{text:"Or in our Chat!",href:e.chatPage}}),e._v(" "),a("br"),e._v(" Â "),a("translate",{attrs:{say:"Found an error?"}}),e._v(" "),a("web",{attrs:{text:"Tell us!",href:e.issuesPage}})],1)]),e._v(" "),a("gallery",{attrs:{images:e.gallery.images,index:e.gallery.index},on:{close:function(t){e.gallery.index=null}}})],1)])};r._withStripped=!0;var n=a(35),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"blueimp-gallery blueimp-gallery-controls",attrs:{id:e.id}},[a("div",{staticClass:"slides"}),e._v(" "),a("h3",{staticClass:"title"}),e._v(" "),a("p",{staticClass:"description"}),e._v(" "),a("i",{staticClass:"prev fa fa-angle-left",attrs:{"aria-hidden":"true"}}),e._v(" "),a("i",{staticClass:"next fa fa-angle-right",attrs:{"aria-hidden":"true"}}),e._v(" "),a("i",{staticClass:"close fa fa-close",attrs:{"aria-hidden":"true"}}),e._v(" "),e.imageUrl?a("web",{staticClass:"open fa fa-external-link",attrs:{href:e.imageUrl}}):e._e()],1)};i._withStripped=!0;a(343),a(330),a(344);var s=a(300),l=a.n(s),o={components:{Web:n.a},props:{images:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},index:{type:Number},id:{type:String,default:"blueimp-gallery"}},data:()=>({instance:null,imageUrl:null}),watch:{index(e){null!==e?this.open(e):(this.instance&&this.instance.close(),this.$emit("close"))}},destroyed(){null!==this.instance&&(this.instance.close(),this.instance=null)},methods:{open(e=0){document.getElementById("app").classList.add("blocking");const t=void 0!==l.a.Gallery?l.a.Gallery:l.a,a=Object.assign({toggleControlsOnReturn:!1,toggleControlsOnSlideClick:!1,closeOnSlideClick:!0,container:"#"+this.id,index:e,onopen:()=>this.$emit("onopen"),onopened:()=>this.$emit("onopened"),onslide:this.onSlideCustom,onslideend:(e,t)=>this.$emit("onslideend",{index:e,slide:t}),onslidecomplete:(e,t)=>this.$emit("onslidecomplete",{index:e,slide:t}),onclose:()=>this.close(),onclosed:()=>this.$emit("onclosed")},this.options);this.instance=t(this.images,a)},onSlideCustom(e,t){this.$emit("onslide",{index:e,slide:t});let a=this.images[e];void 0!==a&&(this.imageUrl=a.href,"video"===a.type.substr(0,5)&&(this.loadCaptions(t,a.href),t.querySelector("a").click()))},async loadCaptions(e,t){let a=t.lastIndexOf("/")+1,r=t.substr(0,a)+"subtitles/",n=t.substring(a,t.lastIndexOf(".")),i={en:"English",de:"Deutsch"};for(let t in i)if(i.hasOwnProperty(t)){let a=`${r+n}-${t}.vtt`;this.addCaption(e,a,t,i[t]).catch(console.error)}},async addCaption(e,t,a,r){let n=await fetch(new Request(t,{redirect:"error",referrerPolicy:"no-referrer"})),i=n.headers.get("content-type");if(!n.ok||"text/plain"!==i.substr(0,10)&&"text/vtt"!==i.substr(0,8))return;let s=await n.blob(),l=document.createElement("track");l.kind="captions",l.label=r,l.srclang=a,l.mode="showing",l.src=window.URL.createObjectURL(s),e.querySelector("video").appendChild(l)},close(){document.getElementById("app").classList.remove("blocking"),this.$emit("close")}}},h=(a(345),a(4)),d=Object(h.a)(o,i,[],!1,null,null,null);d.options.__file="src/vue/Components/Gallery.vue";var c=d.exports,u=a(7),g=a(28),p=a(6),m=a(1),f=a(331),v=a.n(f),b=a(18),_=a(5);class w{constructor(){this.handbookUrl=_.a.get("server.handbook.url"),this.pages=[]}async fetchPage(e){if(this.pages.hasOwnProperty(e))return this.pages[e];try{let t=this.handbookUrl+e,a=await fetch(new Request(t+".md"),{redirect:"error",referrerPolicy:"no-referrer"}),r=t.substr(t,t.lastIndexOf("/")+1),n=a.headers.get("content-type");if(a.ok){if("text/plain"!==n.substr(0,10))return w._generateErrorPage(m.a.translate("Invalid content type {mime}",{mime:n}));let i=await a.text();if(!i)return w._generateErrorPage(m.a.translate("No content available"));let s=this.render(i,r,t);return this.pages[e]=s,s}return w._generateErrorPage(a.status+" â€“ "+a.statusText)}catch(e){return w._generateErrorPage(e.message)}}render(e,t,a){let r=[],n=[],i=new v.a.Renderer,s=new v.a.Renderer;return s.link=(e,r,i,s)=>this._renderLink(e,r,i,s,t,a,n),s.image=(e,a,r,i)=>w._renderImage(e,a,r,i,t,n),s.heading=(e,t)=>w._renderHeader(e,t,r),s.code=(e,t,a)=>i.code(e,t,a).replace(/(\r\n|\n|\r)/gm,"<br>"),s.blockquote=e=>w._renderBlockquote(e,i),w._extendMarkedLexer(),{source:v()(e,{renderer:s}),media:n,navigation:r}}static _generateErrorPage(e){return{source:"ðŸ’€ "+m.a.translate("Unable to fetch page: {message}.",{message:e}),media:[],navigation:[]}}static _extendMarkedLexer(){v.a.InlineLexer.prototype.outputLink=function(e,t){function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let r=a(t.href),n=t.title?a(t.title):null;if(this.isRenderingImage=!1,"!"!==e[0].charAt(0)){this.isRenderingLink=!0;let t=this.renderer.link(r,n,this.output(e[1]),this.isRenderingImage);return this.isRenderingImage=!1,this.isRenderingLink=!1,t}return this.isRenderingImage=!0,this.renderer.image(r,n,a(e[1]),this.isRenderingLink)}}_renderLink(e,t,a,r,n,i,s){let l="_blank",o=new URL(e,"#"===e.substr(0,1)?i:n);if(e=o.href,o.hash.length&&-1!==o.href.indexOf(i+"#"))[e,t,l]=w._processAnchorLink(o.hash,t);else if(-1!==o.href.indexOf(this.handbookUrl)){let a=o.href.substr(o.href.lastIndexOf(".")+1);-1===["png","jpg","jpeg","gif","mp4","m4v","ogg","webm","txt","html","json","js"].indexOf(a)&&([e,t,l]=this._processInternalLink(o,t))}if(r){let t=s[1*a];return t.url=e,w._renderMediaElement(t)}null===t&&(t=m.a.translate("Go to {href}",{href:e}));let h="_blank"===l?'rel="noreferrer noopener"':"";return`<a href="${e}" title="${decodeURI(t)}" target="${l}" ${h}>${a}</a>`}static _processAnchorLink(e,t){let a=w._getLinkAnchor(e),r=b.a.resolve({name:"Help",params:{page:b.a.currentRoute.params.page},hash:a});return null===t&&(t=m.a.translate("Go to {href}",{href:e.substr(1).replace(/-{1}/g," ")})),[r.href,t,"_self"]}_processInternalLink(e,t){let a=void 0,r=e.href.substr(this.handbookUrl.length);e.hash.length&&(a=w._getLinkAnchor(e.hash),r=r.substring(0,r.indexOf(e.hash)));let n=b.a.resolve({name:"Help",params:{page:r},hash:a});return null===t&&(t=m.a.translate("Go to {href}",{href:r.replace(/-{1}/g," ")})),[n.href,t,"_self"]}static _getLinkAnchor(e){return"#help-"+e.trim().substr(1).toLowerCase().replace(/[^\w]+/g,"-").replace(/^-+|-+$/g,"")}static _renderHeader(e,t,a){let r=e.trim().toLowerCase().replace(/&#{0,1}[a-z0-9]+;/g,"").replace(/[^\w]+/g,"-").replace(/^-+|-+$/g,""),[n]=w._processAnchorLink("#"+r,"");return this._addNavigationEntry(a,{label:e,href:n,level:t,id:"help-"+r,children:[]}),`<h${t} id="help-${r}"><a href="${n}" class="fa fa-link help-anchor" aria-hidden="true"></a>${e}</h${t}>`}static _addNavigationEntry(e,t){if(0===e.length)return void e.push(t);let a=e[e.length-1];if(a.level>=t.level)e.push(t);else{let e=a,r=null;for(;;){if(e.level>=t.level){r.children.push(t);break}if(0===e.children.length){e.children.push(t);break}r=e,e=e.children[e.children.length-1]}}}static _renderImage(e,t,a,r,n,i){let s=new URL(e,n);null===a&&(a=e),null===t&&(t=a);let l=i.length+1,o="help-media-"+l,h={url:s.href,thumbnail:s.href,id:o,description:a,title:t,index:l};return i.push(h),r?l-1:w._renderMediaElement(h)}static _renderMediaElement(e){let t=m.a.translate("Figure {count}: {title}",{count:e.index,title:e.title}),a=e.url.substr(e.url.lastIndexOf(".")+1);return-1!==["mp4","m4v","ogg","webm"].indexOf(a)?e.mime="video/"+a:e.mime="Ã¬mage/"+a,`<span class="md-image-container" id="${e.id}" data-image-id="${e.index}">\n                <a class="md-image-link" title="${e.title}" href="${e.url}" target="_blank" rel="noreferrer noopener">\n                <img src="${e.thumbnail}" alt="${e.description.replace(/"/g,"&quot;")}" class="md-image">\n                <span class="md-image-caption">${t}</span>\n                </a></span>`}static _renderBlockquote(e,t){let a=null,r=[":exclamation:",":warning:",":thumbsup:",":star:"],n={":exclamation:":"important",":warning:":"warning",":thumbsup:":"recommended",":star:":"info"};for(let t of r)-1!==e.indexOf(t)&&(e=e.replace(t,""),a=n[t]);let i=t.blockquote(e);return null!==a&&(i=i.replace("<blockquote>",`<blockquote class="${a}">`)),i}}var y=new w,k={components:{Web:n.a,Gallery:c,Translate:u.a,Breadcrumb:g.a},data:()=>({loading:!0,source:"",navigation:[],media:[],page:"",section:"",anchor:"",gallery:{images:[],index:null},chatPage:"https://t.me/nc_passwords",forumPage:"https://help.nextcloud.com/c/apps/passwords",issuesPage:"https://github.com/marius-wieschollek/passwords/issues?q=is%3Aissue"}),created(){this.refreshView(),document.addEventListener("scroll",this.setActiveSection)},beforeDestroy(){document.removeEventListener("scroll",this.setActiveSection)},updated(){this.updateMediaElements()},computed:{getBreadcrumbIcons(){let e=[{path:{name:"Help"},label:m.a.translate("Handbook")}];if(void 0===this.$route.params.page)return e;let t=this.$route.params.page.split("/"),a="";for(let r=0;r<t.length;r++)a+=t[r],e.push({path:{name:"Help",params:{page:a}},label:m.a.translate(t[r].replace(/-{1}/g," "))});return e},getPageTitle(){if(void 0===this.$route.params.page)return"Handbook";let e=this.page;return e.substr(e.lastIndexOf("/")+1).replace(/-{1}/g," ")},showNavigation(){return void 0!==this.$route.params.page&&this.navigation.length>0}},methods:{refreshView(){void 0===this.$route.params.page?this.showPage("Index"):this.$route.params.page!==this.page?this.showPage(this.$route.params.page):this.jumpToAnchor()},setActiveSection(){let e=document.querySelector("footer.handbook-footer"),t=window.scrollY,a="";if(e&&e.offsetTop<window.innerHeight+t){let e=this.navigation[this.navigation.length-1];this.section=e.id}else{for(let e=0;e<this.navigation.length;e++){let r=this.navigation[e],n=document.getElementById(r.id);if(null!==n){if(n.offsetTop-n.offsetHeight>=t)return void(this.section=a);a=r.id}}this.section=a}},async showPage(e){if(this.page===e)return;this.loading=!0;let{source:t,media:a,navigation:r}=await y.fetchPage(e);this.source=t,this.media=a,this.navigation=r,this.page=e,this.loading=!1},jumpToAnchor(e="smooth"){if(!this.$route.hash)return void p.a.scrollTo(0,0,e);let t=document.querySelector("#app-content "+this.$route.hash);if(t){let a=t.offsetTop-document.getElementById("controls").offsetHeight;p.a.scrollTo(a,0,e),t.classList.add("highlight"),t.addEventListener("animationend",()=>{t.classList.remove("highlight")}),this.anchor=this.$route.hash}document.querySelectorAll(`#app-content .highlight:not(${this.$route.hash})`).forEach(e=>{e.classList.remove("highlight")})},updateMediaElements(){if(this.gallery.images.length===this.media.length)return;let e=[];for(let t=0;t<this.media.length;t++){let a=this.media[t],r=document.getElementById(a.id);e.push({title:a.title,href:a.url,type:a.mime,poster:a.thumbnail}),r.querySelector("a").addEventListener("click",e=>{e.preventDefault(),this.gallery.index=t}),r.querySelector("img").addEventListener("load",()=>{this.jumpToAnchor("auto")})}this.gallery.images=e}},watch:{$route:function(){this.refreshView()}}},x=(a(349),Object(h.a)(k,r,[],!1,null,null,null));x.options.__file="src/vue/Section/Help.vue";t.default=x.exports}}]);