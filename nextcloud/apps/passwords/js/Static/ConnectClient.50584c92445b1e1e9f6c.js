(window.pwWpJsonP=window.pwWpJsonP||[]).push([[3],{326:function(t,e,s){var n=s(395);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(12).default)("66a6522d",n,!1,{})},327:function(t,e,s){var n=s(397);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(12).default)("100f4fbe",n,!1,{})},328:function(t,e,s){var n=s(399);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(12).default)("a489ef66",n,!1,{})},329:function(t,e,s){var n=s(401);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(12).default)("24230deb",n,!1,{})},394:function(t,e,s){"use strict";var n=s(326);s.n(n).a},395:function(t,e,s){},396:function(t,e,s){"use strict";var n=s(327);s.n(n).a},397:function(t,e,s){},398:function(t,e,s){"use strict";var n=s(328);s.n(n).a},399:function(t,e,s){},400:function(t,e,s){"use strict";var n=s(329);s.n(n).a},401:function(t,e,s){},420:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"background",attrs:{id:"passlink-connect"}},[s("div",{staticClass:"window"},[s("div",{staticClass:"title"},[s("i",{staticClass:"fa fa-times close",on:{click:t.close}}),t._v(" "),s("translate",{attrs:{say:"Connect a new device"}})],1),t._v(" "),s("div",{staticClass:"content"},[1===t.step?s("connect-link",{attrs:{"show-connect-link":t.showConnectLink},on:{connect:function(e){return t.connect(e)}}}):t._e(),t._v(" "),2===t.step?s("connect-confirm",{attrs:{client:t.client},on:{reject:function(e){return t.reject(e)},confirm:function(e){return t.confirm(e)}}}):t._e(),t._v(" "),3===t.step?s("connect-result",{attrs:{status:t.status},on:{restart:t.restart,close:t.close}}):t._e()],1)])])};n._withStripped=!0;var a=s(7),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"connect-client-link"},[s("translate",{staticClass:"description",attrs:{tag:"div",say:t.description}}),t._v(" "),s("qr-code",{staticClass:"qr-code",attrs:{text:t.link,color:t.color,size:300,bgColor:"#fff0",errorLevel:"Q"}}),t._v(" "),t.showConnectLink?s("translate",{staticClass:"share-link button primary",attrs:{tag:"a",target:"_blank",href:t.link,say:"Connect via link"}}):t._e()],1)};i._withStripped=!0;var c=s(150),o=s(5),r=s(0),l={components:{Translate:a.a,QrCode:c.a},props:{showConnectLink:Boolean},data:()=>({color:o.a.get("server.theme.color.primary"),link:"",id:"",active:!1}),async mounted(){this.active=!0;do{await this.requestConnection()}while(this.active&&!await this.awaitResponse())},beforeDestroy(){this.active=!1},computed:{description(){return this.showConnectLink?"To connect a new device or app, simply scan the QR code or click the link.":"Scan the QR code to connect a new device or app."}},methods:{async requestConnection(){if(!this.active)return;let t=await r.a.passLinkConnectRequest();this.link=t.link,this.id=t.id},async awaitResponse(){try{let t=await r.a.passLinkConnectAwait();return this.$emit("connect",t),!0}catch(t){return!1}}}},u=(s(394),s(4)),p=Object(u.a)(l,i,[],!1,null,null,null);p.options.__file="src/vue/Dialog/ConnectClient/ConnectLink.vue";var h=p.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"connect-client-confirm"},[s("translate",{staticClass:"code-info",attrs:{tag:"div",say:"Check if the codes below match with the ones provided by the device or app:"}}),t._v(" "),t._l(t.client.code,(function(e){return s("div",{staticClass:"code-container"},[s("span",{staticClass:"code"},[t._v(t._s(e))])])})),t._v(" "),s("div",{staticClass:"client-name"},[s("translate",{attrs:{tag:"label",for:"client-name",say:"Choose a name:"}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],attrs:{id:"client-name"},domProps:{value:t.label},on:{input:function(e){e.target.composing||(t.label=e.target.value)}}})],1),t._v(" "),s("div",{staticClass:"reject-timer"},[s("progress",{attrs:{max:"100"},domProps:{value:t.progress},on:{click:function(e){return t.reject()}}}),t._v(" "),s("translate",{attrs:{say:"The codes don't match"},on:{click:function(e){return t.reject()}}})],1),t._v(" "),s("translate",{staticClass:"primary",attrs:{tag:"button",say:"Looks good"},on:{click:function(e){return t.confirm()}}})],2)};v._withStripped=!0;var d={components:{Translate:a.a},props:{client:Object},data(){return{label:this.client.label,interval:null,progress:0}},mounted(){this.interval=setInterval(()=>{this.timer()},1e3)},beforeDestroy(){clearInterval(this.interval)},methods:{async reject(){await r.a.passLinkConnectReject(),this.$emit("reject",{success:!1,reason:"reject",client:this.label}),clearInterval(this.interval)},async confirm(){await r.a.passLinkConnectConfirm(this.label),this.$emit("confirm",{success:!0,client:this.label}),clearInterval(this.interval)},timer(){this.progress+=100/this.client.time,this.progress>=100&&(this.$emit("reject",{success:!1,reason:"timeout",client:this.label}),clearInterval(this.interval)),console.log(this.progress)}}},f=(s(396),Object(u.a)(d,v,[],!1,null,null,null));f.options.__file="src/vue/Dialog/ConnectClient/ConnectConfirm.vue";var m=f.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"connect-client-result"},[s("translate",{class:t.cssClass,attrs:{tag:"div",icon:t.icon,say:t.text}}),t._v(" "),s("translate",{attrs:{tag:"button",say:t.closeText},on:{click:function(e){return t.close()}}}),t._v(" "),s("translate",{staticClass:"primary",attrs:{tag:"button",say:t.restartText},on:{click:function(e){return t.restart()}}})],1)};C._withStripped=!0;var _={components:{Translate:a.a},props:{status:Object},computed:{cssClass(){return"message"+(this.status.success?"":" error")},text(){return this.status.success?"Connection successful":"reject"===this.status.reason?"You cancelled the connection":"timeout"===this.status.reason?"You did not confirm the connection in time":void 0},icon(){return this.status.success?"check-circle":"times-circle"},closeText(){return this.status.success?"I'm done":"Don't try again"},restartText(){return this.status.success?"Connect something else":"Try again"}},methods:{async close(){this.$emit("close")},async restart(){this.$emit("restart")}}},g=(s(398),Object(u.a)(_,C,[],!1,null,null,null));g.options.__file="src/vue/Dialog/ConnectClient/ConnectResult.vue";var k={components:{ConnectLink:h,ConnectConfirm:m,ConnectResult:g.exports,Translate:a.a},props:{showConnectLink:Boolean},data:()=>({step:1,client:{},status:{}}),methods:{close(){this.$destroy();let t=document.getElementById("app-popup"),e=document.createElement("div");t.replaceChild(e,t.childNodes[0])},connect(t){this.client=t,this.step=2},reject(t){this.status=t,this.step=3},confirm(t){this.status=t,this.step=3},restart(){this.status={},this.client={},this.step=1}}},w=(s(400),Object(u.a)(k,n,[],!1,null,null,null));w.options.__file="src/vue/Dialog/ConnectClient.vue";e.default=w.exports}}]);